!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.simpleTree=t()}(this,function(){"use strict";!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}(".simple-tree.tree-wrapper {\n  width: 100%;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n}\n.simple-tree.tree-wrapper ul {\n  list-style: none;\n}\n.simple-tree.tree-wrapper .tree-base-node:hover {\n  cursor: pointer;\n}\n.simple-tree.tree-wrapper .tree-base-node .tree-group {\n  transition: height 0.3s ease;\n  overflow: hidden;\n}\n.simple-tree.tree-wrapper .tree-base-node .tree-node-content {\n  transition: color 0.3s, background 0.3s;\n  line-height: 36px;\n  height: 36px;\n}\n.simple-tree.tree-wrapper .tree-base-node .tree-node-content:hover {\n  background: #ecf5ff;\n}\n.simple-tree.tree-wrapper .tree-base-node .tree-node-content .tree-node-title {\n  padding-left: 3px;\n}\n.simple-tree.tree-wrapper .tree-base-node .tree-node-content.active {\n  color: #2d8cf0;\n}\n.simple-tree.tree-wrapper .tree-base-node .tree-node-content.active {\n  background: #ecf5ff;\n}\n.simple-tree.tree-wrapper .tree-base-node .tree-node-content .tree-node-icon.icon-angle {\n  display: inline-block;\n  cursor: pointer;\n  width: 0;\n  height: 0;\n  margin-left: 6px;\n  margin-right: 3px;\n  border: 5px solid transparent;\n  border-right-width: 0;\n  border-left-width: 6px;\n  border-left-color: #000;\n  -webkit-transform: rotate(0);\n          transform: rotate(0);\n  transition: -webkit-transform 0.3s ease;\n  transition: transform 0.3s ease;\n  transition: transform 0.3s ease, -webkit-transform 0.3s ease;\n}\n.simple-tree.tree-wrapper .tree-base-node .tree-node-content .tree-node-icon.icon-angle.down {\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg);\n}\n");var e=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),n=Object.assign?Object.assign:function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p=function(e){var t=document.createElement("div");return t.innerHTML=e,t.childNodes[0]},h=function(e){return e.children&&0!==e.children.length},i=void 0===window.ontransitionend?"webkitTransitionEnd":"transitionend",t=function(){function s(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var t={baseNode:null,paddingLeft:16,animateSpeed:"normal",treeData:[],frontIconClassName:null,dblclick:null,click:null,createTreeNodeContent:null,templates:{treeWrapper:'<div class="simple-tree tree-wrapper"></div>',treeBaseNode:'<ul class="tree-base-node"></ul>',treeNode:'<li class="tree-node"></li>',treeGroup:'<ul class="tree-group"></ul>',treeNodeContent:'<div class="tree-node-content"></div>'}};this.opts=n({},t,e),this.domRefs={},this.activeItem=null,this.domRefs.treeNodeContents=[],this.initDom().initState().bindEvent().appendBaseNode()}return e(s,[{key:"initDom",value:function(){if(!(this.opts.treeData instanceof Array))throw new TypeError("treeData must be an Array!");return this.domRefs.treeWrapper=p(this.opts.templates.treeWrapper),this.domRefs.treeBaseNode=p(this.opts.templates.treeBaseNode),this.initTree(this.domRefs.treeWrapper,this.domRefs.treeBaseNode,this.opts.treeData),this}},{key:"initTree",value:function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,i=void 0,s=void 0;0===n.length&&e.appendChild(t);for(var o=0,a=n.length;o<a;o++){if(i=p(this.opts.templates.treeNode),s=p(this.opts.templates.treeNodeContent),h(n[o])){var d=n[o].expand;s.setAttribute("role","folder"),s.innerHTML='<span class="tree-node-icon icon-angle '+(d&&"down")+'"></span><span class="tree-node-title">'+n[o].title+"</span>",d?s.setAttribute("expand",!0):s.setAttribute("expand",!1)}else if(this.opts.frontIconClassName){var l=this.opts.frontIconClassName;s.innerHTML='<span class="tree-node-icon '+l+'"></span><span class="tree-node-title">'+n[o].title+"</span>"}else s.innerHTML='<span class="tree-node-title">'+n[o].title+"</span>";if(s.style.paddingLeft=r*this.opts.paddingLeft+"px",s.$$nodeData=n[o],this.domRefs.treeNodeContents.push(s),i.appendChild(s),t.appendChild(i),e.appendChild(t),h(n[o])){var c=p(this.opts.templates.treeGroup);this.initTree(i,c,n[o].children,r+1)}}}},{key:"initState",value:function(){var e=this.domRefs.treeNodeContents,n=this.opts.createNodeContent;return e.forEach(function(e){var t=e.$$nodeData;h(t)&&!t.expand&&(e.nextElementSibling.style.display="none"),t.createNodeContent&&"function"==typeof t.createNodeContent?t.createNodeContent(e,t):n&&n(e,t)}),this}},{key:"appendBaseNode",value:function(){this.opts.baseNode.appendChild(this.domRefs.treeWrapper)}},{key:"bindEvent",value:function(){var i=this;return this.clickHandle=function(e){var t=e||window.event,n=t.target||t.srcElement,r="div"===n.tagName.toLowerCase()?n:n.parentNode;r.hasAttribute("role")?s.toggleExpand(r):i.opts.click&&(i.toggleActive(r),i.opts.click(t,r.$$nodeData))},this.dblclickHandle=function(e){var t=e||window.event,n=t.target||t.srcElement,r="div"===n.tagName.toLowerCase()?n:n.parentNode;r.hasAttribute("role")||i.opts.dblclick&&(i.toggleActive(r),i.opts.dblclick(t,r.$$nodeData))},this.domRefs.treeWrapper.addEventListener("click",this.clickHandle,!1),this.opts.dblclick&&this.domRefs.treeWrapper.addEventListener("dblclick",this.dblclickHandle,!1),this}},{key:"toggleActive",value:function(e){this.activeItem&&this.activeItem.classList&&this.activeItem.classList.remove("active"),e.classList.add("active"),this.activeItem=e}},{key:"removeEvent",value:function(){this.domRefs.treeWrapper.removeEventListener("click",this.clickHandle,!1),this.domRefs.treeWrapper.removeEventListener("dblclick",this.dblclickHandle,!1),this.clickHandle=null,this.dblclickHandle=null}},{key:"getActiveItem",value:function(){return this.activeItem?this.activeItem:null}},{key:"destroyed",value:function(){for(var e=this.domRefs.treeNodeContents.length;e--;)this.domRefs.treeNodeContents[e]=null;this.removeEvent(),this.domRefs.treeWrapper=null,this.opts.baseNode.removeChild(this.opts.baseNode.children[0])}}],[{key:"toggleExpand",value:function(e){"true"===e.getAttribute("expand")?(e.firstChild.classList.remove("down"),e.setAttribute("expand",!1)):(e.firstChild.classList.add("down"),e.setAttribute("expand",!0)),this.slideAnimate(e)}},{key:"slideAnimate",value:function(e){var t=e.nextElementSibling;if(t.$$transitionendHandle||(t.$$transitionendHandle=this.transitionendHandle.bind(this,t),t.addEventListener(i,t.$$transitionendHandle,!1)),"true"===e.getAttribute("expand")){t.style.display="",t.style.height="";var n=t.offsetHeight;t.style.height="0",setTimeout(function(){t.style.height=n+"px"},0)}else{var r=t.offsetHeight;t.style.height=r+"px",setTimeout(function(){t.style.height="0"},0)}}},{key:"transitionendHandle",value:function(e){"0px"!==e.style.height?e.style.height="":e.style.display="none",e.removeEventListener(i,e.$$transitionendHandle),e.$$transitionendHandle=null,delete e.$$transitionendHandle}}]),s}();return t.version="2.0.1",t});
