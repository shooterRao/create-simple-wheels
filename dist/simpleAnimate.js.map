{"version":3,"file":"simpleAnimate.js","sources":["../simpleAnimate/index.js"],"sourcesContent":["const simpleAnimate = {\n  // 暂时只有这几个动画函数算法\n  // 需要增加参考 https://github.com/danro/jquery-easing/blob/master/jquery.easing.js\n  // t: current time, b: begInnIng value, c: change In value, d: duration\n  animateType: {\n    easeInQuad(t, b, c, d) {\n      return c * (t /= d) * t + b;\n    },\n    easeOutQuad(t, b, c, d) {\n      return -c * (t /= d) * (t - 2) + b;\n    }\n  },\n  // 增加动画算法\n  extendAnimateType(type) {\n    this.animateType = Object.assign({}, this.animateType, type);\n  },\n  defaultOpts: {\n    from: 0,\n    to: 1000,\n    during: 300,\n    type: 'easeInQuad',\n    callback() {}\n  },\n  /*\n    * options 配置\n      {\n        from: 开始值,\n        to: 目标值,\n        during: 持续时间,\n        type: 动画函数\n        callback: 回调\n      }\n      return <Promise>\n  */\n  play(options) {\n    return new Promise(resolve => {\n      const opts = Object.assign({}, this.defaultOpts, options);\n      const {\n        to,\n        from,\n        type,\n        during,\n        callback\n      } = opts;\n      // 计算总共的帧数\n      // 1秒 = 60帧\n      // 1帧 = 16.7ms\n      // 根据毫秒数得出总共的帧数\n      const durFps = Math.ceil(during / 16.7);\n      // requestAnimationFrame的兼容处理\n      if (!window.requestAnimationFrame) {\n        window.requestAnimationFrame = fn => {\n          setTimeout(fn, 16.7);\n        };\n      }\n      // 动画运动实际上就是 0 ~ 动画总帧数 的过程\n      let start = 0;\n      // 运动\n      const step = () => {\n        // 当前的运动位置\n        const value = this.animateType[type](start, from, to - from, durFps);\n        callback(value);\n        // 时间递增\n        start++;\n        // 如果还没有运动到位，继续\n        if (start <= durFps) {\n          window.requestAnimationFrame(step);\n        } else {\n          // 动画结束，在promise.then中执行相关操作\n          resolve();\n        }\n      };\n      // 开始执行动画\n      step();\n    });\n  }\n};\n\nexport default simpleAnimate;\n"],"names":["t","b","c","d","type","animateType","Object","assign","this","options","Promise","opts","_this","defaultOpts","to","from","during","callback","durFps","Math","ceil","window","requestAnimationFrame","fn","start","step","value"],"mappings":"+LAAsB,aAIP,qBACAA,EAAGC,EAAGC,EAAGC,UACXD,GAAKF,GAAKG,GAAKH,EAAIC,wBAEhBD,EAAGC,EAAGC,EAAGC,UACXD,GAAKF,GAAKG,IAAMH,EAAI,GAAKC,+BAInBG,QACXC,YAAcC,OAAOC,OAAO,GAAIC,KAAKH,YAAaD,gBAE5C,MACL,KACF,WACI,SACF,kDAcHK,qBACI,IAAIC,QAAQ,gBACXC,EAAOL,OAAOC,OAAO,GAAIK,EAAKC,YAAaJ,GAE/CK,EAKEH,EALFG,GACAC,EAIEJ,EAJFI,KACAX,EAGEO,EAHFP,KACAY,EAEEL,EAFFK,OACAC,EACEN,EADFM,SAMIC,EAASC,KAAKC,KAAKJ,EAAS,MAE7BK,OAAOC,+BACHA,sBAAwB,uBAClBC,EAAI,YAIfC,EAAQ,GAEC,SAAPC,QAEEC,EAAQd,EAAKP,YAAYD,GAAMoB,EAAOT,EAAMD,EAAKC,EAAMG,KACpDQ,QAIIR,SACJI,sBAAsBG"}