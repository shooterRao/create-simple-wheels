!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e.simplePagination=n()}(this,function(){"use strict";!function(e,n){void 0===n&&(n={});var t=n.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===t&&i.firstChild?i.insertBefore(a,i.firstChild):i.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}}(".page-container {\n  width: 100%;\n  list-style: none;\n  font-size: 0;\n  padding: 0;\n  margin: 0;\n  box-sizing: border-box;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n}\n.page-container .page-li {\n  display: inline-block;\n  font-size: 15px;\n  box-sizing: inherit;\n  border: 1px solid #eaeaea;\n  min-width: 32px;\n  height: 32px;\n  line-height: 32px;\n  margin-left: 5px;\n  cursor: pointer;\n  text-align: center;\n}\n.page-container .page-li.page-li-active {\n  background: #2d8cf0;\n  border-color: #2d8cf0;\n  color: #ffffff;\n}\n.page-container .page-prev,\n.page-container .page-next {\n  padding: 0 5px;\n  margin-left: 0;\n}\n.page-container .page-prev.disable,\n.page-container .page-next.disable {\n  color: #c6c6c6;\n}\n.page-container .page-next {\n  margin-left: 5px;\n}\n.page-container .page-ellipsis {\n  border: none;\n  cursor: default;\n}\n");var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e=function(){function i(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,t){return n&&i(e.prototype,n),t&&i(e,t),e}}(),i=Object.assign?Object.assign:function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e};return function(){function t(e,n){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t);this.totalPage=e,this.currentPage=1,this.opts=i({},{baseNode:null,pageControl:2,containerCN:"page-container",listCN:"page-li",activeListCN:"page-li-active",prevBtnCN:"page-prev",nextBtnCN:"page-next",disableBtnCN:"disable",pageNumCN:"page-number",preText:"上一页",nextText:"下一页"},n),this.domRefs={},this.clickHandle=null,this.checkBaseNode().render().bindEvent()}return e(t,[{key:"checkBaseNode",value:function(){if(!this.opts.baseNode)throw new Error("BaseNode is required");if(e=this.opts.baseNode,!("function"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"===(void 0===e?"undefined":n(e))&&1===e.nodeType&&"string"==typeof e.nodeName))throw new Error("BaseNode must a HTMLElement");var e;return this}},{key:"render",value:function(){var e=this.opts,n=e.baseNode,t=e.containerCN,i=this.totalPage,a=this.currentPage;this.domRefs.containerNode=document.createElement("ul"),this.domRefs.containerNode.className=t;var o=this.showPages(a,i);return this.domRefs.containerNode.innerHTML=o,n.appendChild(this.domRefs.containerNode),this}},{key:"bindEvent",value:function(){var a=this,e=this.opts,o=e.prevBtnCN,s=e.nextBtnCN;return this.clickHandle=function(e){var n=e||window.event,t=n.target||n.srcElement;if(t.dataset.page){var i=t.dataset.page;a.goToPage(i)}else t.classList&&(t.classList.contains(o)&&a.goToPage(a.currentPage-1),t.classList.contains(s)&&a.goToPage(a.currentPage+1))},this.domRefs.containerNode.addEventListener("click",this.clickHandle,!1),this}},{key:"goToPage",value:function(e){e=+e;var n=this.totalPage;if(!(e===this.currentPage||n<e||e<1)){this.currentPage=e,this.opts.baseNode.dispatchEvent(new CustomEvent("pageChange",{detail:{page:e}}));var t=this.domRefs.containerNode,i=this.showPages(this.currentPage,n);t.innerHTML="",t.innerHTML=i}}},{key:"showPages",value:function(e,n){for(var t=this.opts,i=t.listCN,a=t.activeListCN,o=t.prevBtnCN,s=t.nextBtnCN,r=t.disableBtnCN,l=t.pageNumCN,c=t.preText,d=t.nextText,p=t.pageControl,g="<li class='"+i+" "+l+" "+a+"' data-page='"+e+"'>"+e+"</li>",u=1;u<=p;u++)1<e-u&&(g="<li class='"+i+" "+l+"' data-page='"+(e-u)+"'>"+(e-u)+"</li>"+g),e+u<n&&(g=g+"<li class='"+i+" "+l+"' data-page='"+(e+u)+"'>"+(e+u)+"</li>");return 1<e-(p+1)&&(g='<li class="'+i+' page-ellipsis">...</li>'+g),g=1<e?"<li class='"+i+" "+o+"'>"+c+"</li>\n        <li class='"+i+" "+l+"' data-page='1'>1</li>\n        "+g:"<li class='"+i+" "+o+" "+r+"'>"+c+"</li>\n      "+g,e+(p+1)<n&&(g+='<li class="'+i+' page-ellipsis">...</li>'),g+=e<n?"<li class='"+i+" "+l+"' data-page='"+n+"'>"+n+"</li>\n        <li class='"+i+" "+s+"'>"+d+"</li>\n        ":"<li class='"+i+" "+s+" "+r+"'>"+d+"</li>"}},{key:"destroyed",value:function(){this.domRefs.containerNode.removeEventListener("click",this.clickHandle,!1),this.opts.baseNode.removeChild(this.domRefs.containerNode),this.clickHandle=null}}]),t}()});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2ltcGxlUGFnaW5hdGlvbi5qcyIsInNvdXJjZXMiOlsiLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWluamVjdC9kaXN0L3N0eWxlLWluamVjdC5lcy5qcyIsIi4uL3V0aWxzL2luZGV4LmpzIiwiLi4vc2ltcGxlUGFnaW5hdGlvbi9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBzdHlsZUluamVjdChjc3MsIHJlZikge1xuICBpZiAoIHJlZiA9PT0gdm9pZCAwICkgcmVmID0ge307XG4gIHZhciBpbnNlcnRBdCA9IHJlZi5pbnNlcnRBdDtcblxuICBpZiAoIWNzcyB8fCB0eXBlb2YgZG9jdW1lbnQgPT09ICd1bmRlZmluZWQnKSB7IHJldHVybjsgfVxuXG4gIHZhciBoZWFkID0gZG9jdW1lbnQuaGVhZCB8fCBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaGVhZCcpWzBdO1xuICB2YXIgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICBzdHlsZS50eXBlID0gJ3RleHQvY3NzJztcblxuICBpZiAoaW5zZXJ0QXQgPT09ICd0b3AnKSB7XG4gICAgaWYgKGhlYWQuZmlyc3RDaGlsZCkge1xuICAgICAgaGVhZC5pbnNlcnRCZWZvcmUoc3R5bGUsIGhlYWQuZmlyc3RDaGlsZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGhlYWQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBoZWFkLmFwcGVuZENoaWxkKHN0eWxlKTtcbiAgfVxuXG4gIGlmIChzdHlsZS5zdHlsZVNoZWV0KSB7XG4gICAgc3R5bGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gY3NzO1xuICB9IGVsc2Uge1xuICAgIHN0eWxlLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcykpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IHN0eWxlSW5qZWN0O1xuIiwiLyoqXHJcbiAqIOWvueixoea1heaLt+i0nVxyXG4gKiBAcGFyYW0ge09iamVjdH0gdGFyZ2V0XHJcbiAqIEByZXR1cm5zIHtPYmplY3R9XHJcbiAqL1xyXG52YXIgYXNzaWduID0gT2JqZWN0LmFzc2lnblxyXG4gID8gT2JqZWN0LmFzc2lnblxyXG4gIDogZnVuY3Rpb24odGFyZ2V0KSB7XHJcbiAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTtcclxuICAgICAgICBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7XHJcbiAgICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkge1xyXG4gICAgICAgICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdGFyZ2V0O1xyXG4gICAgfTtcclxuXHJcbi8qKlxyXG4gKiBjcmVhdGVOb2RlXHJcbiAqIEBwYXJhbSB7U3RyaW5nfSBodG1sU3RyXHJcbiAqIEByZXR1cm5zIHtEb21Ob2RlfVxyXG4gKi9cclxudmFyIGNyZWF0ZU5vZGUgPSBmdW5jdGlvbihodG1sU3RyKSB7XHJcbiAgdmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgZGl2LmlubmVySFRNTCA9IGh0bWxTdHI7XHJcbiAgcmV0dXJuIGRpdi5jaGlsZE5vZGVzWzBdO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIOiKgueCuemAieaLqeWZqFxyXG4gKiBAcGFyYW0ge0RvbU5vZGV9IGVsXHJcbiAqIEBwYXJhbSB7U3RyaW5nfSBzZWxlY3RvclxyXG4gKiBAcmV0dXJucyB7RG9tTm9kZX1cclxuICovXHJcbnZhciBxdWVyeSA9IGZ1bmN0aW9uKGVsLCBzZWxlY3Rvcikge1xyXG4gIHJldHVybiBlbC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKVxyXG4gICAgPyBlbC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKVxyXG4gICAgOiBjb25zb2xlLmVycm9yKFwiQ2Fubm90IGZpbmQgXCIgKyBzZWxlY3RvciArIFwiIG9mIGVsIVwiKTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiDov5Tlm57miYDmnInoioLngrlcclxuICogQHBhcmFtIHtEb21Ob2RlfSBlbFxyXG4gKiBAcGFyYW0ge1N0cmluZ30gc2VsZWN0b3JcclxuICogQHJldHVybnMge05vZGVMaXN0fVxyXG4gKi9cclxudmFyIHF1ZXJ5QWxsID0gZnVuY3Rpb24oZWwsIHNlbGVjdG9yKSB7XHJcbiAgcmV0dXJuIGVsLnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIOiKgua1geWHveaVsFxyXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSB3YWl0XHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXHJcbiAqIEByZXR1cm5zIHtGdW5jdGlvbn1cclxuICovXHJcbnZhciB0aHJvdHRsZSA9IGZ1bmN0aW9uKGZ1bmMsIHdhaXQsIG9wdGlvbnMpIHtcclxuICB2YXIgY29udGV4dCwgYXJncywgcmVzdWx0O1xyXG5cclxuICB2YXIgdGltZW91dCA9IG51bGw7XHJcblxyXG4gIHZhciBwcmV2aW91cyA9IDA7XHJcblxyXG4gIGlmICghb3B0aW9ucykgb3B0aW9ucyA9IHt9O1xyXG5cclxuICB2YXIgbGF0ZXIgPSBmdW5jdGlvbigpIHtcclxuICAgIHByZXZpb3VzID0gb3B0aW9ucy5sZWFkaW5nID09PSBmYWxzZSA/IDAgOiBEYXRlLm5vdygpO1xyXG4gICAgdGltZW91dCA9IG51bGw7XHJcbiAgICByZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xyXG5cclxuICAgIGlmICghdGltZW91dCkgY29udGV4dCA9IGFyZ3MgPSBudWxsO1xyXG4gIH07XHJcblxyXG4gIHJldHVybiBmdW5jdGlvbigpIHtcclxuICAgIHZhciBub3cgPSBEYXRlLm5vdygpO1xyXG5cclxuICAgIGlmICghcHJldmlvdXMgJiYgb3B0aW9ucy5sZWFkaW5nID09PSBmYWxzZSkge1xyXG4gICAgICBwcmV2aW91cyA9IG5vdztcclxuICAgIH1cclxuXHJcbiAgICB2YXIgcmVtYWluaW5nID0gd2FpdCAtIChub3cgLSBwcmV2aW91cyk7XHJcbiAgICBjb250ZXh0ID0gdGhpcztcclxuICAgIGFyZ3MgPSBhcmd1bWVudHM7XHJcblxyXG4gICAgaWYgKHJlbWFpbmluZyA8PSAwIHx8IHJlbWFpbmluZyA+IHdhaXQpIHtcclxuICAgICAgaWYgKHRpbWVvdXQpIHtcclxuICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XHJcbiAgICAgICAgdGltZW91dCA9IG51bGw7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHByZXZpb3VzID0gbm93O1xyXG5cclxuICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcclxuXHJcbiAgICAgIGlmICghdGltZW91dCkgY29udGV4dCA9IGFyZ3MgPSBudWxsO1xyXG4gICAgfSBlbHNlIGlmICghdGltZW91dCAmJiBvcHRpb25zLnRyYWlsaW5nICE9PSBmYWxzZSkge1xyXG4gICAgICB0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgcmVtYWluaW5nKTtcclxuICAgIH1cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiDljrvmipblh73mlbBcclxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuY1xyXG4gKiBAcGFyYW0ge051bWJlcn0gd2FpdFxyXG4gKiBAcGFyYW0ge0Jvb2xlYW59IGltbWVkaWF0ZVxyXG4gKiBAcmV0dXJuc1xyXG4gKi9cclxudmFyIGRlYm91bmNlID0gZnVuY3Rpb24oZnVuYywgd2FpdCwgaW1tZWRpYXRlKSB7XHJcbiAgdmFyIHRpbWVvdXQsIGFyZ3MsIGNvbnRleHQsIHRpbWVzdGFtcCwgcmVzdWx0O1xyXG5cclxuICB2YXIgbGF0ZXIgPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBsYXN0ID0gbmV3IERhdGUoKS5nZXRUaW1lKCkgLSB0aW1lc3RhbXA7XHJcbiAgICBpZiAobGFzdCA8IHdhaXQgJiYgbGFzdCA+PSAwKSB7XHJcbiAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCB3YWl0IC0gbGFzdCk7IC8vIHdhaXQgLSBsYXN05Y+v5Lul5bCR5omn6KGM5b6I5aSa5qyhXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aW1lb3V0ID0gbnVsbDtcclxuXHJcbiAgICAgIGlmICghaW1tZWRpYXRlKSB7XHJcbiAgICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcclxuICAgICAgICBpZiAoIXRpbWVvdXQpIHtcclxuICAgICAgICAgIGNvbnRleHQgPSBhcmdzID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9O1xyXG5cclxuICByZXR1cm4gZnVuY3Rpb24oKSB7XHJcbiAgICBjb250ZXh0ID0gdGhpcztcclxuICAgIGFyZ3MgPSBhcmd1bWVudHM7XHJcblxyXG4gICAgLy8g5q+P5qyh6Kem5Y+R5Ye95pWw77yM5pu05paw5pe26Ze05oizXHJcbiAgICB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcclxuXHJcbiAgICAvLyB0aW1lb3V05Yik5pat5b6I6YeN6KaB77yM5a6D5piv5Yik5pat5piv5ZCm6aaW5qyh6Kem5Y+R55qE6YeN6KaB5a2X5q61XHJcblxyXG4gICAgdmFyIGNhbGxOb3cgPSBpbW1lZGlhdGUgJiYgIXRpbWVvdXQ7XHJcblxyXG4gICAgLy8g6aaW5qyhdGltZW91dOS4uuiCr+WumuS4um51bGxcclxuICAgIGlmICghdGltZW91dCkge1xyXG4gICAgICAvLyDmraTliIbmlK/lj6rmiafooYzkuIDmrKFcclxuICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHdhaXQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOeri+WNs+inpuWPkVxyXG4gICAgaWYgKGNhbGxOb3cpIHtcclxuICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcclxuICAgICAgLy8g6Kej6Zmk5byV55SoXHJcbiAgICAgIGNvbnRleHQgPSBhcmdzID0gbnVsbDtcclxuICAgIH1cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfTtcclxufTtcclxuLyoqXHJcbiAqIOWIpOaWreaYr+WQpuS4umRvbeiKgueCuVxyXG4gKiBAcGFyYW0ge0RvbU5vZGV9IGl0ZW1cclxuICogQHJldHVybnNcclxuICovXHJcbnZhciBpc0RPTSA9IGl0ZW0gPT4ge1xyXG4gIHJldHVybiB0eXBlb2YgSFRNTEVsZW1lbnQgPT09IFwiZnVuY3Rpb25cIlxyXG4gICAgPyBpdGVtIGluc3RhbmNlb2YgSFRNTEVsZW1lbnRcclxuICAgIDogaXRlbSAmJlxyXG4gICAgICAgIHR5cGVvZiBpdGVtID09PSBcIm9iamVjdFwiICYmXHJcbiAgICAgICAgaXRlbS5ub2RlVHlwZSA9PT0gMSAmJlxyXG4gICAgICAgIHR5cGVvZiBpdGVtLm5vZGVOYW1lID09PSBcInN0cmluZ1wiO1xyXG59O1xyXG5cclxuZXhwb3J0IHsgYXNzaWduLCBjcmVhdGVOb2RlLCBkZWJvdW5jZSwgdGhyb3R0bGUsIHF1ZXJ5LCBxdWVyeUFsbCwgaXNET00gfTtcclxuIiwiaW1wb3J0IFwiLi9zdHlsZS5sZXNzXCI7XG5cbmltcG9ydCB7IGFzc2lnbiwgaXNET00gfSBmcm9tIFwiLi4vdXRpbHMvaW5kZXhcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3Mgc2ltcGxlUGFnaW5hdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHRvdGFsUGFnZSwgb3B0cykge1xuICAgIC8vIENO5Li6Y2xhc3NOYW1l566A5YaZXG4gICAgY29uc3QgZGVmYXVsdE9wdHMgPSB7XG4gICAgICBiYXNlTm9kZTogbnVsbCwvLyDlv4XpobvopoHkvKDvvIzliIbpobXnu4Tku7bmjILovb3nmoToioLngrlcbiAgICAgIHBhZ2VDb250cm9sOiAyLCAvLyDlvZPliY3pobXpnaLmmL7npLrliY3lkI7lpJrlsJHpobVcbiAgICAgIGNvbnRhaW5lckNOOiBcInBhZ2UtY29udGFpbmVyXCIsXG4gICAgICBsaXN0Q046IFwicGFnZS1saVwiLFxuICAgICAgYWN0aXZlTGlzdENOOiBcInBhZ2UtbGktYWN0aXZlXCIsXG4gICAgICBwcmV2QnRuQ046IFwicGFnZS1wcmV2XCIsXG4gICAgICBuZXh0QnRuQ046IFwicGFnZS1uZXh0XCIsXG4gICAgICBkaXNhYmxlQnRuQ046IFwiZGlzYWJsZVwiLFxuICAgICAgcGFnZU51bUNOOiBcInBhZ2UtbnVtYmVyXCIsXG4gICAgICBwcmVUZXh0OiBcIuS4iuS4gOmhtVwiLFxuICAgICAgbmV4dFRleHQ6IFwi5LiL5LiA6aG1XCJcbiAgICB9O1xuICAgIHRoaXMudG90YWxQYWdlID0gdG90YWxQYWdlO1xuICAgIHRoaXMuY3VycmVudFBhZ2UgPSAxO1xuICAgIHRoaXMub3B0cyA9IGFzc2lnbih7fSwgZGVmYXVsdE9wdHMsIG9wdHMpO1xuICAgIHRoaXMuZG9tUmVmcyA9IHt9O1xuICAgIHRoaXMuY2xpY2tIYW5kbGUgPSBudWxsO1xuICAgIHRoaXMuY2hlY2tCYXNlTm9kZSgpLnJlbmRlcigpLmJpbmRFdmVudCgpO1xuICB9XG5cbiAgLyoqXG4gICAgKiBAbWV0aG9kIGNoZWNrQmFzZU5vZGVcbiAgICAqIOajgOafpUJhc2VOb2RlXG4gICAgKi9cbiAgY2hlY2tCYXNlTm9kZSgpIHtcbiAgICBpZighdGhpcy5vcHRzLmJhc2VOb2RlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJCYXNlTm9kZSBpcyByZXF1aXJlZFwiKTtcbiAgICB9XG4gICAgaWYoIWlzRE9NKHRoaXMub3B0cy5iYXNlTm9kZSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkJhc2VOb2RlIG11c3QgYSBIVE1MRWxlbWVudFwiKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICAqIEBtZXRob2QgcmVuZGVyXG4gICAgKiDpppbmrKHmuLLmn5NcbiAgICAqL1xuICByZW5kZXIoKSB7XG4gICAgY29uc3QgeyBiYXNlTm9kZSwgY29udGFpbmVyQ04gfSA9IHRoaXMub3B0cztcbiAgICBjb25zdCB0b3RhbFBhZ2UgPSB0aGlzLnRvdGFsUGFnZTtcbiAgICBjb25zdCBjdXJyZW50UGFnZSA9IHRoaXMuY3VycmVudFBhZ2U7XG4gICAgdGhpcy5kb21SZWZzLmNvbnRhaW5lck5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidWxcIik7XG4gICAgdGhpcy5kb21SZWZzLmNvbnRhaW5lck5vZGUuY2xhc3NOYW1lID0gY29udGFpbmVyQ047XG4gICAgY29uc3QgcGFnZUNvbnRlbnQgPSB0aGlzLnNob3dQYWdlcyhjdXJyZW50UGFnZSwgdG90YWxQYWdlKTtcbiAgICB0aGlzLmRvbVJlZnMuY29udGFpbmVyTm9kZS5pbm5lckhUTUwgPSBwYWdlQ29udGVudDtcbiAgICBiYXNlTm9kZS5hcHBlbmRDaGlsZCh0aGlzLmRvbVJlZnMuY29udGFpbmVyTm9kZSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICAqIEBtZXRob2QgYmluZEV2ZW50XG4gICAgKiDnu5Hlrprkuovku7ZcbiAgICAqL1xuICBiaW5kRXZlbnQoKSB7XG4gICAgY29uc3QgeyBwcmV2QnRuQ04sIG5leHRCdG5DTiB9ID0gdGhpcy5vcHRzO1xuICAgIHRoaXMuY2xpY2tIYW5kbGUgPSAoZXZ0KSA9PiB7XG4gICAgICBjb25zdCBlID0gZXZ0IHx8IHdpbmRvdy5ldmVudDtcbiAgICAgIGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0IHx8IGUuc3JjRWxlbWVudDtcbiAgICAgIGlmKHRhcmdldC5kYXRhc2V0LnBhZ2UpIHtcbiAgICAgICAgY29uc3QgcGFnZSA9IHRhcmdldC5kYXRhc2V0LnBhZ2U7XG4gICAgICAgIHRoaXMuZ29Ub1BhZ2UocGFnZSk7XG4gICAgICB9ZWxzZSBpZih0YXJnZXQuY2xhc3NMaXN0KXtcbiAgICAgICAgLy8g5LiK5LiA6aG1YnRuXG4gICAgICAgIGlmKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMocHJldkJ0bkNOKSkge1xuICAgICAgICAgIHRoaXMuZ29Ub1BhZ2UodGhpcy5jdXJyZW50UGFnZSAtIDEpXG4gICAgICAgIH1cbiAgICAgICAgLy8g5LiL5LiA6aG1YnRuXG4gICAgICAgIGlmKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMobmV4dEJ0bkNOKSkge1xuICAgICAgICAgIHRoaXMuZ29Ub1BhZ2UodGhpcy5jdXJyZW50UGFnZSArIDEpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHsgY29udGFpbmVyTm9kZSB9ID0gdGhpcy5kb21SZWZzO1xuICAgIGNvbnRhaW5lck5vZGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLHRoaXMuY2xpY2tIYW5kbGUsIGZhbHNlKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgICogQG1ldGhvZCBnb1RvUGFnZVxuICAgICog6aG16Z2i6Lez6L2sXG4gICAgKiBAcGFyYW0ge1N0cm5nfE51bWJlcn0gcGFnZVxuICAgICovXG4gIGdvVG9QYWdlKHBhZ2UpIHtcbiAgICBwYWdlID0gK3BhZ2U7IC8vIOS8oOWFpeeahHBhZ2XlpoLmnpzkuLpTdHJpbmfvvIzovazkuLpOdW1iZXJcbiAgICBjb25zdCB7IHRvdGFsUGFnZSB9ID0gdGhpcztcbiAgICAvLyDovrnnvJjliKTmlq1cbiAgICBpZiAocGFnZSA9PT0gdGhpcy5jdXJyZW50UGFnZSB8fCBwYWdlID4gdG90YWxQYWdlIHx8IHBhZ2UgPCAxKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuY3VycmVudFBhZ2UgPSBwYWdlO1xuICAgIC8vIOa0vuWPkeiHquWumuS5ieS6i+S7tlxuICAgIHRoaXMub3B0cy5iYXNlTm9kZS5kaXNwYXRjaEV2ZW50KFxuICAgICAgLy8g5oqKcGFnZeS8oOWIsOS6i+S7tuWbnuiwg+WPguaVsOmHjOmdolxuICAgICAgbmV3IEN1c3RvbUV2ZW50KFwicGFnZUNoYW5nZVwiLCB7IGRldGFpbDogeyBwYWdlIH0gfSlcbiAgICApO1xuICAgIGNvbnN0IHsgY29udGFpbmVyTm9kZSB9ID0gdGhpcy5kb21SZWZzO1xuICAgIGNvbnN0IHBhZ2VDb250ZW50ID0gdGhpcy5zaG93UGFnZXModGhpcy5jdXJyZW50UGFnZSwgdG90YWxQYWdlKTtcbiAgICBjb250YWluZXJOb2RlLmlubmVySFRNTCA9IFwiXCI7XG4gICAgY29udGFpbmVyTm9kZS5pbm5lckhUTUwgPSBwYWdlQ29udGVudDtcbiAgfVxuXG4gIC8qKlxuICAgICogQG1ldGhvZCBzaG93UGFnZXNcbiAgICAqIOaguOW/g+eul+azle+8jOaYvuekuumhteaVsOWHveaVsFxuICAgICogQHBhcmFtIHtOdW1iZXJ9IOW9k+WJjemhteaVsOOAgeaAu+mhteaVsFxuICAgICovXG4gIHNob3dQYWdlcyhwYWdlLCB0b3RhbCkge1xuICAgIGNvbnN0IHtcbiAgICAgIGxpc3RDTixcbiAgICAgIGFjdGl2ZUxpc3RDTixcbiAgICAgIHByZXZCdG5DTixcbiAgICAgIG5leHRCdG5DTixcbiAgICAgIGRpc2FibGVCdG5DTixcbiAgICAgIHBhZ2VOdW1DTixcbiAgICAgIHByZVRleHQsXG4gICAgICBuZXh0VGV4dCxcbiAgICAgIHBhZ2VDb250cm9sXG4gICAgfSA9IHRoaXMub3B0cztcbiAgICBsZXQgc3RyID0gYDxsaSBjbGFzcz0nJHtsaXN0Q059ICR7cGFnZU51bUNOfSAke2FjdGl2ZUxpc3RDTn0nIGRhdGEtcGFnZT0nJHtwYWdlfSc+JHtwYWdlfTwvbGk+YDtcbiAgICAvLyDlpITnkIbliY3lkI7pobrluo/lhbPns7tcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8PSBwYWdlQ29udHJvbDsgaSsrKSB7XG4gICAgICAvLyDlpITnkIbliY3pnaJcbiAgICAgIGlmIChwYWdlIC0gaSA+IDEpIHtcbiAgICAgICAgc3RyID1cbiAgICAgICAgICBgPGxpIGNsYXNzPScke2xpc3RDTn0gJHtwYWdlTnVtQ059JyBkYXRhLXBhZ2U9JyR7cGFnZSAtIGl9Jz4ke3BhZ2UgLVxuICAgICAgICAgICAgaX08L2xpPmAgKyBzdHI7XG4gICAgICB9XG4gICAgICAvLyDlpITnkIblkI7pnaJcbiAgICAgIGlmIChwYWdlICsgaSA8IHRvdGFsKSB7XG4gICAgICAgIHN0ciA9XG4gICAgICAgICAgc3RyICtcbiAgICAgICAgICBgPGxpIGNsYXNzPScke2xpc3RDTn0gJHtwYWdlTnVtQ059JyBkYXRhLXBhZ2U9JyR7cGFnZSArIGl9Jz4ke3BhZ2UgK1xuICAgICAgICAgICAgaX08L2xpPmA7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIOWJjemdoueahOecgeeVpeesplxuICAgIGlmIChwYWdlIC0gKHBhZ2VDb250cm9sICsgMSkgPiAxKSB7XG4gICAgICBzdHIgPSBgPGxpIGNsYXNzPVwiJHtsaXN0Q059IHBhZ2UtZWxsaXBzaXNcIj4uLi48L2xpPmAgKyBzdHI7XG4gICAgfVxuXG4gICAgaWYgKHBhZ2UgPiAxKSB7XG4gICAgICBzdHIgPVxuICAgICAgICBgPGxpIGNsYXNzPScke2xpc3RDTn0gJHtwcmV2QnRuQ059Jz4ke3ByZVRleHR9PC9saT5cbiAgICAgICAgPGxpIGNsYXNzPScke2xpc3RDTn0gJHtwYWdlTnVtQ059JyBkYXRhLXBhZ2U9JzEnPjE8L2xpPlxuICAgICAgICBgICsgc3RyO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdHIgPVxuICAgICAgICBgPGxpIGNsYXNzPScke2xpc3RDTn0gJHtwcmV2QnRuQ059ICR7ZGlzYWJsZUJ0bkNOfSc+JHtwcmVUZXh0fTwvbGk+XG4gICAgICBgICsgc3RyO1xuICAgIH1cblxuICAgIC8vIOWQjumdoueahOecgeeVpeesplxuICAgIGlmIChwYWdlICsgKHBhZ2VDb250cm9sICsgMSkgPCB0b3RhbCkge1xuICAgICAgc3RyICs9IGA8bGkgY2xhc3M9XCIke2xpc3RDTn0gcGFnZS1lbGxpcHNpc1wiPi4uLjwvbGk+YDtcbiAgICB9XG5cbiAgICBpZiAocGFnZSA8IHRvdGFsKSB7XG4gICAgICBzdHIgKz0gYDxsaSBjbGFzcz0nJHtsaXN0Q059ICR7cGFnZU51bUNOfScgZGF0YS1wYWdlPScke3RvdGFsfSc+JHt0b3RhbH08L2xpPlxuICAgICAgICA8bGkgY2xhc3M9JyR7bGlzdENOfSAke25leHRCdG5DTn0nPiR7bmV4dFRleHR9PC9saT5cbiAgICAgICAgYDtcbiAgICB9IGVsc2Uge1xuICAgICAgc3RyICs9IGA8bGkgY2xhc3M9JyR7bGlzdENOfSAke25leHRCdG5DTn0gJHtkaXNhYmxlQnRuQ059Jz4ke25leHRUZXh0fTwvbGk+YDtcbiAgICB9XG5cbiAgICByZXR1cm4gc3RyO1xuICB9XG5cbiAgLyoqXG4gICAgKiBAbWV0aG9kIGRlc3Ryb3llZFxuICAgICog6ZSA5q+B6IqC54K5XG4gICAgKi9cbiAgZGVzdHJveWVkKCkge1xuICAgIHRoaXMuZG9tUmVmcy5jb250YWluZXJOb2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5jbGlja0hhbmRsZSwgZmFsc2UpO1xuICAgIHRoaXMub3B0cy5iYXNlTm9kZS5yZW1vdmVDaGlsZCh0aGlzLmRvbVJlZnMuY29udGFpbmVyTm9kZSk7XG4gICAgdGhpcy5jbGlja0hhbmRsZSA9IG51bGw7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJjc3MiLCJyZWYiLCJpbnNlcnRBdCIsImRvY3VtZW50IiwiaGVhZCIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwic3R5bGUiLCJjcmVhdGVFbGVtZW50IiwidHlwZSIsImZpcnN0Q2hpbGQiLCJpbnNlcnRCZWZvcmUiLCJhcHBlbmRDaGlsZCIsInN0eWxlU2hlZXQiLCJjc3NUZXh0IiwiY3JlYXRlVGV4dE5vZGUiLCJhc3NpZ24iLCJPYmplY3QiLCJ0YXJnZXQiLCJpIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwic291cmNlIiwia2V5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwidG90YWxQYWdlIiwib3B0cyIsImN1cnJlbnRQYWdlIiwiZG9tUmVmcyIsImNsaWNrSGFuZGxlIiwiY2hlY2tCYXNlTm9kZSIsInJlbmRlciIsImJpbmRFdmVudCIsInRoaXMiLCJiYXNlTm9kZSIsIkVycm9yIiwiSFRNTEVsZW1lbnQiLCJpdGVtIiwibm9kZVR5cGUiLCJub2RlTmFtZSIsImNvbnRhaW5lckNOIiwiY29udGFpbmVyTm9kZSIsImNsYXNzTmFtZSIsInBhZ2VDb250ZW50Iiwic2hvd1BhZ2VzIiwiaW5uZXJIVE1MIiwicHJldkJ0bkNOIiwibmV4dEJ0bkNOIiwiZXZ0IiwiZSIsIndpbmRvdyIsImV2ZW50Iiwic3JjRWxlbWVudCIsImRhdGFzZXQiLCJwYWdlIiwiZ29Ub1BhZ2UiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsIl90aGlzIiwiYWRkRXZlbnRMaXN0ZW5lciIsImRpc3BhdGNoRXZlbnQiLCJDdXN0b21FdmVudCIsImRldGFpbCIsInRvdGFsIiwibGlzdENOIiwiYWN0aXZlTGlzdENOIiwiZGlzYWJsZUJ0bkNOIiwicGFnZU51bUNOIiwicHJlVGV4dCIsIm5leHRUZXh0IiwicGFnZUNvbnRyb2wiLCJzdHIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwicmVtb3ZlQ2hpbGQiXSwibWFwcGluZ3MiOiI2TEFBQSxTQUFxQkEsRUFBS0MsUUFDWCxJQUFSQSxJQUFpQkEsRUFBTSxJQUM1QixJQUFJQyxFQUFXRCxFQUFJQyxTQUVuQixHQUFLRixHQUEyQixvQkFBYkcsU0FBbkIsQ0FFQSxJQUFJQyxFQUFPRCxTQUFTQyxNQUFRRCxTQUFTRSxxQkFBcUIsUUFBUSxHQUM5REMsRUFBUUgsU0FBU0ksY0FBYyxTQUNuQ0QsRUFBTUUsS0FBTyxXQUVJLFFBQWJOLEdBQ0VFLEVBQUtLLFdBQ1BMLEVBQUtNLGFBQWFKLEVBQU9GLEVBQUtLLFlBS2hDTCxFQUFLTyxZQUFZTCxHQUdmQSxFQUFNTSxXQUNSTixFQUFNTSxXQUFXQyxRQUFVYixFQUUzQk0sRUFBTUssWUFBWVIsU0FBU1csZUFBZWQsaTRDQ2xCMUNlLEVBQVNDLE9BQU9ELE9BQ2hCQyxP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
