!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.simplewheels={})}(this,function(e){"use strict";var t={animateType:{linear:function(e,t,n,i){return n*e/i+t},easeInQuad:function(e,t,n,i){return n*(e/=i)*e+t},easeOutQuad:function(e,t,n,i){return-n*(e/=i)*(e-2)+t}},defaultOpts:{from:0,to:1e3,during:300,type:"easeInQuad",callback:function(){}},extend:function(e){this.animateType=Object.assign({},this.animateType,e)},play:function(d){var c=this;return new Promise(function(n){var e=Object.assign({},c.defaultOpts,d),i=e.to,r=e.from,a=e.type,t=e.during,s=e.callback,o=Math.ceil(t/16.7);window.requestAnimationFrame||(window.requestAnimationFrame=function(e){setTimeout(e,16.7)});var l=0;!function e(){var t=c.animateType[a](l,r,i-r,o);s(t),++l<=o?window.requestAnimationFrame(e):n()}()})}};function n(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===n&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}n(".page-container {\n  width: 100%;\n  list-style: none;\n  font-size: 0;\n  padding: 0;\n  margin: 0;\n  box-sizing: border-box;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n}\n.page-container .page-li {\n  display: inline-block;\n  font-size: 15px;\n  box-sizing: inherit;\n  border: 1px solid #eaeaea;\n  min-width: 32px;\n  height: 32px;\n  line-height: 32px;\n  margin-left: 5px;\n  cursor: pointer;\n  text-align: center;\n}\n.page-container .page-li.page-li-active {\n  background: #2d8cf0;\n  border-color: #2d8cf0;\n  color: #ffffff;\n}\n.page-container .page-prev,\n.page-container .page-next {\n  padding: 0 5px;\n  margin-left: 0;\n}\n.page-container .page-prev.disable,\n.page-container .page-next.disable {\n  color: #c6c6c6;\n}\n.page-container .page-next {\n  margin-left: 5px;\n}\n.page-container .page-ellipsis {\n  border: none;\n  cursor: default;\n}\n");var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},s=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),o=Object.assign?Object.assign:function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},p=function(e){var t=document.createElement("div");return t.innerHTML=e,t.childNodes[0]},u=function(e){return e.children&&0!==e.children.length},a=function(){function n(e,t){r(this,n);this.totalPage=e,this.currentPage=1,this.opts=o({},{baseNode:null,pageControl:2,containerCN:"page-container",listCN:"page-li",activeListCN:"page-li-active",prevBtnCN:"page-prev",nextBtnCN:"page-next",disableBtnCN:"disable",pageNumCN:"page-number",preText:"上一页",nextText:"下一页"},t),this.domRefs={},this.clickHandle=null,this.checkBaseNode().render().bindEvent()}return s(n,[{key:"checkBaseNode",value:function(){if(!this.opts.baseNode)throw new Error("BaseNode is required");if(e=this.opts.baseNode,!("function"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"===(void 0===e?"undefined":i(e))&&1===e.nodeType&&"string"==typeof e.nodeName))throw new Error("BaseNode must a HTMLElement");var e;return this}},{key:"render",value:function(){var e=this.opts,t=e.baseNode,n=e.containerCN,i=this.totalPage,r=this.currentPage;this.domRefs.containerNode=document.createElement("ul"),this.domRefs.containerNode.className=n;var a=this.showPages(r,i);return this.domRefs.containerNode.innerHTML=a,t.appendChild(this.domRefs.containerNode),this}},{key:"bindEvent",value:function(){var r=this,e=this.opts,a=e.prevBtnCN,s=e.nextBtnCN;return this.clickHandle=function(e){var t=e||window.event,n=t.target||t.srcElement;if(n.dataset.page){var i=n.dataset.page;r.goToPage(i)}else n.classList&&(n.classList.contains(a)&&r.goToPage(r.currentPage-1),n.classList.contains(s)&&r.goToPage(r.currentPage+1))},this.domRefs.containerNode.addEventListener("click",this.clickHandle,!1),this}},{key:"goToPage",value:function(e){var t=+e,n=this.totalPage;if(!(t===this.currentPage||n<t||t<1)){this.currentPage=t,this.opts.baseNode.dispatchEvent(new CustomEvent("pageChange",{detail:{page:t}}));var i=this.domRefs.containerNode,r=this.showPages(this.currentPage,n);i.innerHTML="",i.innerHTML=r}}},{key:"showPages",value:function(e,t){for(var n=this.opts,i=n.listCN,r=n.activeListCN,a=n.prevBtnCN,s=n.nextBtnCN,o=n.disableBtnCN,l=n.pageNumCN,d=n.preText,c=n.nextText,p=n.pageControl,u="<li class='"+i+" "+l+" "+r+"' data-page='"+e+"'>"+e+"</li>",h=1;h<=p;h++)1<e-h&&(u="<li class='"+i+" "+l+"' data-page='"+(e-h)+"'>"+(e-h)+"</li>"+u),e+h<t&&(u=u+"<li class='"+i+" "+l+"' data-page='"+(e+h)+"'>"+(e+h)+"</li>");return 1<e-(p+1)&&(u='<li class="'+i+' page-ellipsis">...</li>'+u),u=1<e?"<li class='"+i+" "+a+"'>"+d+"</li>\n        <li class='"+i+" "+l+"' data-page='1'>1</li>\n        "+u+"\n        ":"<li class='"+i+" "+a+" "+o+"'>"+d+"</li>"+u+"\n      ",e+(p+1)<t&&(u+='<li class="'+i+' page-ellipsis">...</li>'),u+=e<t?"<li class='"+i+" "+l+"' data-page='"+t+"'>"+t+"</li>\n        <li class='"+i+" "+s+"'>"+c+"</li>\n        ":"<li class='"+i+" "+s+" "+o+"'>"+c+"</li>"}},{key:"destroyed",value:function(){this.domRefs.containerNode.removeEventListener("click",this.clickHandle,!1),this.opts.baseNode.removeChild(this.domRefs.containerNode),this.clickHandle=null}}]),n}();a.version="1.0";var l=function(){function i(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1e3,n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];if(r(this,i),this.running=!1,this.time=t,this.immediate=n,e){if("function"!=typeof e)throw new Error("参数1 必须是个函数");this.callback=e}else this.callback=null;this.timer=null}return s(i,[{key:"start",value:function(){var t=this;this.immediate&&this.callback(),this.running=!0;return function e(){t.timer=setTimeout(function(){return t.running?(t.callback(),e()):null},t.time)}(),this}},{key:"cancel",value:function(){this.running=!1,this.timer&&clearTimeout(this.timer),this.timer=null}}]),i}();n(".simple-tree.tree-wrapper {\n  width: 100%;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n}\n.simple-tree.tree-wrapper ul {\n  list-style: none;\n}\n.simple-tree.tree-wrapper .tree-base-node:hover {\n  cursor: pointer;\n}\n.simple-tree.tree-wrapper .tree-base-node .tree-group {\n  transition: height 0.3s ease;\n  overflow: hidden;\n}\n.simple-tree.tree-wrapper .tree-base-node .tree-node-content {\n  transition: color 0.3s, background 0.3s;\n  line-height: 36px;\n  height: 36px;\n}\n.simple-tree.tree-wrapper .tree-base-node .tree-node-content:hover {\n  background: #ecf5ff;\n}\n.simple-tree.tree-wrapper .tree-base-node .tree-node-content .tree-node-title {\n  padding-left: 3px;\n}\n.simple-tree.tree-wrapper .tree-base-node .tree-node-content.active {\n  color: #2d8cf0;\n}\n.simple-tree.tree-wrapper .tree-base-node .tree-node-content.active {\n  background: #ecf5ff;\n}\n.simple-tree.tree-wrapper .tree-base-node .tree-node-content .tree-node-icon.icon-angle {\n  display: inline-block;\n  cursor: pointer;\n  width: 0;\n  height: 0;\n  margin-left: 6px;\n  margin-right: 3px;\n  border: 5px solid transparent;\n  border-right-width: 0;\n  border-left-width: 6px;\n  border-left-color: #000;\n  -webkit-transform: rotate(0);\n          transform: rotate(0);\n  transition: -webkit-transform 0.3s ease;\n  transition: transform 0.3s ease;\n  transition: transform 0.3s ease, -webkit-transform 0.3s ease;\n}\n.simple-tree.tree-wrapper .tree-base-node .tree-node-content .tree-node-icon.icon-angle.down {\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg);\n}\n");var d=void 0===window.ontransitionend?"webkitTransitionEnd":"transitionend",c=function(){function a(e){r(this,a);var t={baseNode:null,paddingLeft:16,animateSpeed:"normal",treeData:[],frontIconClassName:null,dblclick:null,click:null,createTreeNodeContent:null,templates:{treeWrapper:'<div class="simple-tree tree-wrapper"></div>',treeBaseNode:'<ul class="tree-base-node"></ul>',treeNode:'<li class="tree-node"></li>',treeGroup:'<ul class="tree-group"></ul>',treeNodeContent:'<div class="tree-node-content"></div>'}};this.opts=o({},t,e),this.domRefs={},this.activeItem=null,this.domRefs.treeNodeContents=[],this.initDom().initState().bindEvent().appendBaseNode()}return s(a,[{key:"initDom",value:function(){if(!(this.opts.treeData instanceof Array))throw new TypeError("treeData must be an Array!");return this.domRefs.treeWrapper=p(this.opts.templates.treeWrapper),this.domRefs.treeBaseNode=p(this.opts.templates.treeBaseNode),this.initTree(this.domRefs.treeWrapper,this.domRefs.treeBaseNode,this.opts.treeData),this}},{key:"initTree",value:function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,r=void 0,a=void 0;0===n.length&&e.appendChild(t);for(var s=0,o=n.length;s<o;s++){if(r=p(this.opts.templates.treeNode),a=p(this.opts.templates.treeNodeContent),u(n[s])){var l=n[s].expand;a.setAttribute("role","folder"),a.innerHTML='<span class="tree-node-icon icon-angle '+(l&&"down")+'"></span><span class="tree-node-title">'+n[s].title+"</span>",l?a.setAttribute("expand",!0):a.setAttribute("expand",!1)}else if(this.opts.frontIconClassName){var d=this.opts.frontIconClassName;a.innerHTML='<span class="tree-node-icon '+d+'"></span><span class="tree-node-title">'+n[s].title+"</span>"}else a.innerHTML='<span class="tree-node-title">'+n[s].title+"</span>";if(a.style.paddingLeft=i*this.opts.paddingLeft+"px",a.$$nodeData=n[s],this.domRefs.treeNodeContents.push(a),r.appendChild(a),t.appendChild(r),e.appendChild(t),u(n[s])){var c=p(this.opts.templates.treeGroup);this.initTree(r,c,n[s].children,i+1)}}}},{key:"initState",value:function(){var e=this.domRefs.treeNodeContents,n=this.opts.createNodeContent;return e.forEach(function(e){var t=e.$$nodeData;u(t)&&!t.expand&&(e.nextElementSibling.style.display="none"),t.createNodeContent&&"function"==typeof t.createNodeContent?t.createNodeContent(e,t):n&&n(e,t)}),this}},{key:"appendBaseNode",value:function(){this.opts.baseNode.appendChild(this.domRefs.treeWrapper)}},{key:"bindEvent",value:function(){var r=this;return this.clickHandle=function(e){var t=e||window.event,n=t.target||t.srcElement,i="div"===n.tagName.toLowerCase()?n:n.parentNode;i.hasAttribute("role")?a.toggleExpand(i):r.opts.click&&(r.toggleActive(i),r.opts.click(t,i.$$nodeData))},this.dblclickHandle=function(e){var t=e||window.event,n=t.target||t.srcElement,i="div"===n.tagName.toLowerCase()?n:n.parentNode;i.hasAttribute("role")||r.opts.dblclick&&(r.toggleActive(i),r.opts.dblclick(t,i.$$nodeData))},this.domRefs.treeWrapper.addEventListener("click",this.clickHandle,!1),this.opts.dblclick&&this.domRefs.treeWrapper.addEventListener("dblclick",this.dblclickHandle,!1),this}},{key:"toggleActive",value:function(e){this.activeItem&&this.activeItem.classList&&this.activeItem.classList.remove("active"),e.classList.add("active"),this.activeItem=e}},{key:"removeEvent",value:function(){this.domRefs.treeWrapper.removeEventListener("click",this.clickHandle,!1),this.domRefs.treeWrapper.removeEventListener("dblclick",this.dblclickHandle,!1),this.clickHandle=null,this.dblclickHandle=null}},{key:"getActiveItem",value:function(){return this.activeItem?this.activeItem:null}},{key:"destroyed",value:function(){for(var e=this.domRefs.treeNodeContents.length;e--;)this.domRefs.treeNodeContents[e]=null;this.removeEvent(),this.domRefs.treeWrapper=null,this.opts.baseNode.removeChild(this.opts.baseNode.children[0])}}],[{key:"toggleExpand",value:function(e){"true"===e.getAttribute("expand")?(e.firstChild.classList.remove("down"),e.setAttribute("expand",!1)):(e.firstChild.classList.add("down"),e.setAttribute("expand",!0)),this.slideAnimate(e)}},{key:"slideAnimate",value:function(e){var t=e.nextElementSibling;if(t.$$transitionendHandle||(t.$$transitionendHandle=this.transitionendHandle.bind(this,t),t.addEventListener(d,t.$$transitionendHandle,!1)),"true"===e.getAttribute("expand")){t.style.display="",t.style.height="";var n=t.offsetHeight;t.style.height="0",setTimeout(function(){t.style.height=n+"px"},0)}else{var i=t.offsetHeight;t.style.height=i+"px",setTimeout(function(){t.style.height="0"},0)}}},{key:"transitionendHandle",value:function(e){"0px"!==e.style.height?e.style.height="":e.style.display="none",e.removeEventListener(d,e.$$transitionendHandle),e.$$transitionendHandle=null,delete e.$$transitionendHandle}}]),a}();c.version="2.0.1",e.simpleAnimate=t,e.simplePagination=a,e.simplePollingAction=l,e.simpleTree=c,Object.defineProperty(e,"__esModule",{value:!0})});
